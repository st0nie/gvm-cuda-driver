#include <errno.h>
#include <fcntl.h>
#include <pthread.h>
#include <regex.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <stdio.h>

#include "helper.h"

entry_t cuda_library_entry[] = {
	{.name = "cuArray3DCreate"},
	{.name = "cuArray3DCreate_v2"},
	{.name = "cuArray3DGetDescriptor"},
	{.name = "cuArray3DGetDescriptor_v2"},
	{.name = "cuArrayCreate"},
	{.name = "cuArrayCreate_v2"},
	{.name = "cuArrayDestroy"},
	{.name = "cuArrayGetDescriptor"},
	{.name = "cuArrayGetDescriptor_v2"},
	{.name = "cuArrayGetMemoryRequirements"},
	{.name = "cuArrayGetPlane"},
	{.name = "cuArrayGetSparseProperties"},
	{.name = "cuCheckpointProcessCheckpoint"},
	{.name = "cuCheckpointProcessGetRestoreThreadId"},
	{.name = "cuCheckpointProcessGetState"},
	{.name = "cuCheckpointProcessLock"},
	{.name = "cuCheckpointProcessRestore"},
	{.name = "cuCheckpointProcessUnlock"},
	{.name = "cuCoredumpGetAttribute"},
	{.name = "cuCoredumpGetAttributeGlobal"},
	{.name = "cuCoredumpSetAttribute"},
	{.name = "cuCoredumpSetAttributeGlobal"},
	{.name = "cuCtxAttach"},
	{.name = "cuCtxCreate"},
	{.name = "cuCtxCreate_v2"},
	{.name = "cuCtxCreate_v3"},
	{.name = "cuCtxCreate_v4"},
	{.name = "cuCtxDestroy"},
	{.name = "cuCtxDestroy_v2"},
	{.name = "cuCtxDetach"},
	{.name = "cuCtxDisablePeerAccess"},
	{.name = "cuCtxEnablePeerAccess"},
	{.name = "cuCtxFromGreenCtx"},
	{.name = "cuCtxGetApiVersion"},
	{.name = "cuCtxGetCacheConfig"},
	{.name = "cuCtxGetCurrent"},
	{.name = "cuCtxGetDevResource"},
	{.name = "cuCtxGetDevice"},
	{.name = "cuCtxGetExecAffinity"},
	{.name = "cuCtxGetFlags"},
	{.name = "cuCtxGetId"},
	{.name = "cuCtxGetLimit"},
	{.name = "cuCtxGetSharedMemConfig"},
	{.name = "cuCtxGetStreamPriorityRange"},
	{.name = "cuCtxPopCurrent"},
	{.name = "cuCtxPopCurrent_v2"},
	{.name = "cuCtxPushCurrent"},
	{.name = "cuCtxPushCurrent_v2"},
	{.name = "cuCtxRecordEvent"},
	{.name = "cuCtxResetPersistingL2Cache"},
	{.name = "cuCtxSetCacheConfig"},
	{.name = "cuCtxSetCurrent"},
	{.name = "cuCtxSetFlags"},
	{.name = "cuCtxSetLimit"},
	{.name = "cuCtxSetSharedMemConfig"},
	{.name = "cuCtxSynchronize"},
	{.name = "cuCtxWaitEvent"},
	{.name = "cuDestroyExternalMemory"},
	{.name = "cuDestroyExternalSemaphore"},
	{.name = "cuDevResourceGenerateDesc"},
	{.name = "cuDevSmResourceSplitByCount"},
	{.name = "cuDeviceCanAccessPeer"},
	{.name = "cuDeviceComputeCapability"},
	{.name = "cuDeviceGet"},
	{.name = "cuDeviceGetAttribute"},
	{.name = "cuDeviceGetByPCIBusId"},
	{.name = "cuDeviceGetCount"},
	{.name = "cuDeviceGetDefaultMemPool"},
	{.name = "cuDeviceGetDevResource"},
	{.name = "cuDeviceGetExecAffinitySupport"},
	{.name = "cuDeviceGetGraphMemAttribute"},
	{.name = "cuDeviceGetLuid"},
	{.name = "cuDeviceGetMemPool"},
	{.name = "cuDeviceGetName"},
	{.name = "cuDeviceGetNvSciSyncAttributes"},
	{.name = "cuDeviceGetP2PAttribute"},
	{.name = "cuDeviceGetPCIBusId"},
	{.name = "cuDeviceGetProperties"},
	{.name = "cuDeviceGetTexture1DLinearMaxWidth"},
	{.name = "cuDeviceGetUuid"},
	{.name = "cuDeviceGetUuid_v2"},
	{.name = "cuDeviceGraphMemTrim"},
	{.name = "cuDevicePrimaryCtxGetState"},
	{.name = "cuDevicePrimaryCtxRelease"},
	{.name = "cuDevicePrimaryCtxRelease_v2"},
	{.name = "cuDevicePrimaryCtxReset"},
	{.name = "cuDevicePrimaryCtxReset_v2"},
	{.name = "cuDevicePrimaryCtxRetain"},
	{.name = "cuDevicePrimaryCtxSetFlags"},
	{.name = "cuDevicePrimaryCtxSetFlags_v2"},
	{.name = "cuDeviceRegisterAsyncNotification"},
	{.name = "cuDeviceSetGraphMemAttribute"},
	{.name = "cuDeviceSetMemPool"},
	{.name = "cuDeviceTotalMem"},
	{.name = "cuDeviceTotalMem_v2"},
	{.name = "cuDeviceUnregisterAsyncNotification"},
	{.name = "cuDriverGetVersion"},
	{.name = "cuEGLApiInit"},
	{.name = "cuEGLStreamConsumerAcquireFrame"},
	{.name = "cuEGLStreamConsumerConnect"},
	{.name = "cuEGLStreamConsumerConnectWithFlags"},
	{.name = "cuEGLStreamConsumerDisconnect"},
	{.name = "cuEGLStreamConsumerReleaseFrame"},
	{.name = "cuEGLStreamProducerConnect"},
	{.name = "cuEGLStreamProducerDisconnect"},
	{.name = "cuEGLStreamProducerPresentFrame"},
	{.name = "cuEGLStreamProducerReturnFrame"},
	{.name = "cuEventCreate"},
	{.name = "cuEventDestroy"},
	{.name = "cuEventDestroy_v2"},
	{.name = "cuEventElapsedTime"},
	{.name = "cuEventElapsedTime_v2"},
	{.name = "cuEventQuery"},
	{.name = "cuEventRecord"},
	{.name = "cuEventRecordWithFlags"},
	{.name = "cuEventRecordWithFlags_ptsz"},
	{.name = "cuEventRecord_ptsz"},
	{.name = "cuEventSynchronize"},
	{.name = "cuExternalMemoryGetMappedBuffer"},
	{.name = "cuExternalMemoryGetMappedMipmappedArray"},
	{.name = "cuFlushGPUDirectRDMAWrites"},
	{.name = "cuFuncGetAttribute"},
	{.name = "cuFuncGetModule"},
	{.name = "cuFuncGetName"},
	{.name = "cuFuncGetParamInfo"},
	{.name = "cuFuncIsLoaded"},
	{.name = "cuFuncLoad"},
	{.name = "cuFuncSetAttribute"},
	{.name = "cuFuncSetBlockShape"},
	{.name = "cuFuncSetCacheConfig"},
	{.name = "cuFuncSetSharedMemConfig"},
	{.name = "cuFuncSetSharedSize"},
	{.name = "cuGLCtxCreate"},
	{.name = "cuGLCtxCreate_v2"},
	{.name = "cuGLGetDevices"},
	{.name = "cuGLGetDevices_v2"},
	{.name = "cuGLInit"},
	{.name = "cuGLMapBufferObject"},
	{.name = "cuGLMapBufferObjectAsync"},
	{.name = "cuGLMapBufferObjectAsync_v2"},
	{.name = "cuGLMapBufferObjectAsync_v2_ptsz"},
	{.name = "cuGLMapBufferObject_v2"},
	{.name = "cuGLMapBufferObject_v2_ptds"},
	{.name = "cuGLRegisterBufferObject"},
	{.name = "cuGLSetBufferObjectMapFlags"},
	{.name = "cuGLUnmapBufferObject"},
	{.name = "cuGLUnmapBufferObjectAsync"},
	{.name = "cuGLUnregisterBufferObject"},
	{.name = "cuGetErrorName"},
	{.name = "cuGetErrorString"},
	{.name = "cuGetExportTable"},
	{.name = "cuGetProcAddress"},
	{.name = "cuGetProcAddress_v2"},
	{.name = "cuGraphAddBatchMemOpNode"},
	{.name = "cuGraphAddChildGraphNode"},
	{.name = "cuGraphAddDependencies"},
	{.name = "cuGraphAddDependencies_v2"},
	{.name = "cuGraphAddEmptyNode"},
	{.name = "cuGraphAddEventRecordNode"},
	{.name = "cuGraphAddEventWaitNode"},
	{.name = "cuGraphAddExternalSemaphoresSignalNode"},
	{.name = "cuGraphAddExternalSemaphoresWaitNode"},
	{.name = "cuGraphAddHostNode"},
	{.name = "cuGraphAddKernelNode"},
	{.name = "cuGraphAddKernelNode_v2"},
	{.name = "cuGraphAddMemAllocNode"},
	{.name = "cuGraphAddMemFreeNode"},
	{.name = "cuGraphAddMemcpyNode"},
	{.name = "cuGraphAddMemsetNode"},
	{.name = "cuGraphAddNode"},
	{.name = "cuGraphAddNode_v2"},
	{.name = "cuGraphBatchMemOpNodeGetParams"},
	{.name = "cuGraphBatchMemOpNodeSetParams"},
	{.name = "cuGraphChildGraphNodeGetGraph"},
	{.name = "cuGraphClone"},
	{.name = "cuGraphConditionalHandleCreate"},
	{.name = "cuGraphCreate"},
	{.name = "cuGraphDebugDotPrint"},
	{.name = "cuGraphDestroy"},
	{.name = "cuGraphDestroyNode"},
	{.name = "cuGraphEventRecordNodeGetEvent"},
	{.name = "cuGraphEventRecordNodeSetEvent"},
	{.name = "cuGraphEventWaitNodeGetEvent"},
	{.name = "cuGraphEventWaitNodeSetEvent"},
	{.name = "cuGraphExecBatchMemOpNodeSetParams"},
	{.name = "cuGraphExecChildGraphNodeSetParams"},
	{.name = "cuGraphExecDestroy"},
	{.name = "cuGraphExecEventRecordNodeSetEvent"},
	{.name = "cuGraphExecEventWaitNodeSetEvent"},
	{.name = "cuGraphExecExternalSemaphoresSignalNodeSetParams"},
	{.name = "cuGraphExecExternalSemaphoresWaitNodeSetParams"},
	{.name = "cuGraphExecGetFlags"},
	{.name = "cuGraphExecHostNodeSetParams"},
	{.name = "cuGraphExecKernelNodeSetParams"},
	{.name = "cuGraphExecKernelNodeSetParams_v2"},
	{.name = "cuGraphExecMemcpyNodeSetParams"},
	{.name = "cuGraphExecMemsetNodeSetParams"},
	{.name = "cuGraphExecNodeSetParams"},
	{.name = "cuGraphExecUpdate"},
	{.name = "cuGraphExecUpdate_v2"},
	{.name = "cuGraphExternalSemaphoresSignalNodeGetParams"},
	{.name = "cuGraphExternalSemaphoresSignalNodeSetParams"},
	{.name = "cuGraphExternalSemaphoresWaitNodeGetParams"},
	{.name = "cuGraphExternalSemaphoresWaitNodeSetParams"},
	{.name = "cuGraphGetEdges"},
	{.name = "cuGraphGetEdges_v2"},
	{.name = "cuGraphGetNodes"},
	{.name = "cuGraphGetRootNodes"},
	{.name = "cuGraphHostNodeGetParams"},
	{.name = "cuGraphHostNodeSetParams"},
	{.name = "cuGraphInstantiate"},
	{.name = "cuGraphInstantiateWithFlags"},
	{.name = "cuGraphInstantiateWithParams"},
	{.name = "cuGraphInstantiateWithParams_ptsz"},
	{.name = "cuGraphInstantiate_v2"},
	{.name = "cuGraphKernelNodeCopyAttributes"},
	{.name = "cuGraphKernelNodeGetAttribute"},
	{.name = "cuGraphKernelNodeGetParams"},
	{.name = "cuGraphKernelNodeGetParams_v2"},
	{.name = "cuGraphKernelNodeSetAttribute"},
	{.name = "cuGraphKernelNodeSetParams"},
	{.name = "cuGraphKernelNodeSetParams_v2"},
	{.name = "cuGraphLaunch"},
	{.name = "cuGraphLaunch_ptsz"},
	{.name = "cuGraphMemAllocNodeGetParams"},
	{.name = "cuGraphMemFreeNodeGetParams"},
	{.name = "cuGraphMemcpyNodeGetParams"},
	{.name = "cuGraphMemcpyNodeSetParams"},
	{.name = "cuGraphMemsetNodeGetParams"},
	{.name = "cuGraphMemsetNodeSetParams"},
	{.name = "cuGraphNodeFindInClone"},
	{.name = "cuGraphNodeGetDependencies"},
	{.name = "cuGraphNodeGetDependencies_v2"},
	{.name = "cuGraphNodeGetDependentNodes"},
	{.name = "cuGraphNodeGetDependentNodes_v2"},
	{.name = "cuGraphNodeGetEnabled"},
	{.name = "cuGraphNodeGetType"},
	{.name = "cuGraphNodeSetEnabled"},
	{.name = "cuGraphNodeSetParams"},
	{.name = "cuGraphReleaseUserObject"},
	{.name = "cuGraphRemoveDependencies"},
	{.name = "cuGraphRemoveDependencies_v2"},
	{.name = "cuGraphRetainUserObject"},
	{.name = "cuGraphUpload"},
	{.name = "cuGraphUpload_ptsz"},
	{.name = "cuGraphicsEGLRegisterImage"},
	{.name = "cuGraphicsGLRegisterBuffer"},
	{.name = "cuGraphicsGLRegisterImage"},
	{.name = "cuGraphicsMapResources"},
	{.name = "cuGraphicsMapResources_ptsz"},
	{.name = "cuGraphicsResourceGetMappedEglFrame"},
	{.name = "cuGraphicsResourceGetMappedMipmappedArray"},
	{.name = "cuGraphicsResourceGetMappedPointer"},
	{.name = "cuGraphicsResourceGetMappedPointer_v2"},
	{.name = "cuGraphicsResourceSetMapFlags"},
	{.name = "cuGraphicsResourceSetMapFlags_v2"},
	{.name = "cuGraphicsSubResourceGetMappedArray"},
	{.name = "cuGraphicsUnmapResources"},
	{.name = "cuGraphicsUnmapResources_ptsz"},
	{.name = "cuGraphicsUnregisterResource"},
	{.name = "cuGraphicsVDPAURegisterOutputSurface"},
	{.name = "cuGraphicsVDPAURegisterVideoSurface"},
	{.name = "cuGreenCtxCreate"},
	{.name = "cuGreenCtxDestroy"},
	{.name = "cuGreenCtxGetDevResource"},
	{.name = "cuGreenCtxRecordEvent"},
	{.name = "cuGreenCtxStreamCreate"},
	{.name = "cuGreenCtxWaitEvent"},
	{.name = "cuImportExternalMemory"},
	{.name = "cuImportExternalSemaphore"},
	{.name = "cuInit"},
	{.name = "cuIpcCloseMemHandle"},
	{.name = "cuIpcGetEventHandle"},
	{.name = "cuIpcGetMemHandle"},
	{.name = "cuIpcOpenEventHandle"},
	{.name = "cuIpcOpenMemHandle"},
	{.name = "cuIpcOpenMemHandle_v2"},
	{.name = "cuKernelGetAttribute"},
	{.name = "cuKernelGetFunction"},
	{.name = "cuKernelGetLibrary"},
	{.name = "cuKernelGetName"},
	{.name = "cuKernelGetParamInfo"},
	{.name = "cuKernelSetAttribute"},
	{.name = "cuKernelSetCacheConfig"},
	{.name = "cuLaunch"},
	{.name = "cuLaunchCooperativeKernel"},
	{.name = "cuLaunchCooperativeKernelMultiDevice"},
	{.name = "cuLaunchCooperativeKernel_ptsz"},
	{.name = "cuLaunchGrid"},
	{.name = "cuLaunchGridAsync"},
	{.name = "cuLaunchHostFunc"},
	{.name = "cuLaunchHostFunc_ptsz"},
	{.name = "cuLaunchKernel"},
	{.name = "cuLaunchKernelEx"},
	{.name = "cuLaunchKernelEx_ptsz"},
	{.name = "cuLaunchKernel_ptsz"},
	{.name = "cuLibraryEnumerateKernels"},
	{.name = "cuLibraryGetGlobal"},
	{.name = "cuLibraryGetKernel"},
	{.name = "cuLibraryGetKernelCount"},
	{.name = "cuLibraryGetManaged"},
	{.name = "cuLibraryGetModule"},
	{.name = "cuLibraryGetUnifiedFunction"},
	{.name = "cuLibraryLoadData"},
	{.name = "cuLibraryLoadFromFile"},
	{.name = "cuLibraryUnload"},
	{.name = "cuLinkAddData"},
	{.name = "cuLinkAddData_v2"},
	{.name = "cuLinkAddFile"},
	{.name = "cuLinkAddFile_v2"},
	{.name = "cuLinkComplete"},
	{.name = "cuLinkCreate"},
	{.name = "cuLinkCreate_v2"},
	{.name = "cuLinkDestroy"},
	{.name = "cuLogsCurrent"},
	{.name = "cuLogsDumpToFile"},
	{.name = "cuLogsDumpToMemory"},
	{.name = "cuLogsRegisterCallback"},
	{.name = "cuLogsUnregisterCallback"},
	{.name = "cuMemAddressFree"},
	{.name = "cuMemAddressReserve"},
	{.name = "cuMemAdvise"},
	{.name = "cuMemAdvise_v2"},
	{.name = "cuMemAlloc"},
	{.name = "cuMemAllocAsync"},
	{.name = "cuMemAllocAsync_ptsz"},
	{.name = "cuMemAllocFromPoolAsync"},
	{.name = "cuMemAllocFromPoolAsync_ptsz"},
	{.name = "cuMemAllocHost"},
	{.name = "cuMemAllocHost_v2"},
	{.name = "cuMemAllocManaged"},
	{.name = "cuMemAllocPitch"},
	{.name = "cuMemAllocPitch_v2"},
	{.name = "cuMemAlloc_v2"},
	{.name = "cuMemBatchDecompressAsync"},
	{.name = "cuMemBatchDecompressAsync_ptsz"},
	{.name = "cuMemCreate"},
	{.name = "cuMemExportToShareableHandle"},
	{.name = "cuMemFree"},
	{.name = "cuMemFreeAsync"},
	{.name = "cuMemFreeAsync_ptsz"},
	{.name = "cuMemFreeHost"},
	{.name = "cuMemFree_v2"},
	{.name = "cuMemGetAccess"},
	{.name = "cuMemGetAddressRange"},
	{.name = "cuMemGetAddressRange_v2"},
	{.name = "cuMemGetAllocationGranularity"},
	{.name = "cuMemGetAllocationPropertiesFromHandle"},
	{.name = "cuMemGetAttribute"},
	{.name = "cuMemGetAttribute_v2"},
	{.name = "cuMemGetHandleForAddressRange"},
	{.name = "cuMemGetInfo"},
	{.name = "cuMemGetInfo_v2"},
	{.name = "cuMemHostAlloc"},
	{.name = "cuMemHostGetDevicePointer"},
	{.name = "cuMemHostGetDevicePointer_v2"},
	{.name = "cuMemHostGetFlags"},
	{.name = "cuMemHostRegister"},
	{.name = "cuMemHostRegister_v2"},
	{.name = "cuMemHostUnregister"},
	{.name = "cuMemImportFromShareableHandle"},
	{.name = "cuMemMap"},
	{.name = "cuMemMapArrayAsync"},
	{.name = "cuMemMapArrayAsync_ptsz"},
	{.name = "cuMemPoolCreate"},
	{.name = "cuMemPoolDestroy"},
	{.name = "cuMemPoolExportPointer"},
	{.name = "cuMemPoolExportToShareableHandle"},
	{.name = "cuMemPoolGetAccess"},
	{.name = "cuMemPoolGetAttribute"},
	{.name = "cuMemPoolImportFromShareableHandle"},
	{.name = "cuMemPoolImportPointer"},
	{.name = "cuMemPoolSetAccess"},
	{.name = "cuMemPoolSetAttribute"},
	{.name = "cuMemPoolTrimTo"},
	{.name = "cuMemPrefetchAsync"},
	{.name = "cuMemPrefetchAsync_ptsz"},
	{.name = "cuMemPrefetchAsync_v2"},
	{.name = "cuMemPrefetchAsync_v2_ptsz"},
	{.name = "cuMemRangeGetAttribute"},
	{.name = "cuMemRangeGetAttributes"},
	{.name = "cuMemRelease"},
	{.name = "cuMemRetainAllocationHandle"},
	{.name = "cuMemSetAccess"},
	{.name = "cuMemUnmap"},
	{.name = "cuMemcpy"},
	{.name = "cuMemcpy2D"},
	{.name = "cuMemcpy2DAsync"},
	{.name = "cuMemcpy2DAsync_v2"},
	{.name = "cuMemcpy2DAsync_v2_ptsz"},
	{.name = "cuMemcpy2DUnaligned"},
	{.name = "cuMemcpy2DUnaligned_v2"},
	{.name = "cuMemcpy2DUnaligned_v2_ptds"},
	{.name = "cuMemcpy2D_v2"},
	{.name = "cuMemcpy2D_v2_ptds"},
	{.name = "cuMemcpy3D"},
	{.name = "cuMemcpy3DAsync"},
	{.name = "cuMemcpy3DAsync_v2"},
	{.name = "cuMemcpy3DAsync_v2_ptsz"},
	{.name = "cuMemcpy3DBatchAsync"},
	{.name = "cuMemcpy3DBatchAsync_ptsz"},
	{.name = "cuMemcpy3DPeer"},
	{.name = "cuMemcpy3DPeerAsync"},
	{.name = "cuMemcpy3DPeerAsync_ptsz"},
	{.name = "cuMemcpy3DPeer_ptds"},
	{.name = "cuMemcpy3D_v2"},
	{.name = "cuMemcpy3D_v2_ptds"},
	{.name = "cuMemcpyAsync"},
	{.name = "cuMemcpyAsync_ptsz"},
	{.name = "cuMemcpyAtoA"},
	{.name = "cuMemcpyAtoA_v2"},
	{.name = "cuMemcpyAtoA_v2_ptds"},
	{.name = "cuMemcpyAtoD"},
	{.name = "cuMemcpyAtoD_v2"},
	{.name = "cuMemcpyAtoD_v2_ptds"},
	{.name = "cuMemcpyAtoH"},
	{.name = "cuMemcpyAtoHAsync"},
	{.name = "cuMemcpyAtoHAsync_v2"},
	{.name = "cuMemcpyAtoHAsync_v2_ptsz"},
	{.name = "cuMemcpyAtoH_v2"},
	{.name = "cuMemcpyAtoH_v2_ptds"},
	{.name = "cuMemcpyBatchAsync"},
	{.name = "cuMemcpyBatchAsync_ptsz"},
	{.name = "cuMemcpyDtoA"},
	{.name = "cuMemcpyDtoA_v2"},
	{.name = "cuMemcpyDtoA_v2_ptds"},
	{.name = "cuMemcpyDtoD"},
	{.name = "cuMemcpyDtoDAsync"},
	{.name = "cuMemcpyDtoDAsync_v2"},
	{.name = "cuMemcpyDtoDAsync_v2_ptsz"},
	{.name = "cuMemcpyDtoD_v2"},
	{.name = "cuMemcpyDtoD_v2_ptds"},
	{.name = "cuMemcpyDtoH"},
	{.name = "cuMemcpyDtoHAsync"},
	{.name = "cuMemcpyDtoHAsync_v2"},
	{.name = "cuMemcpyDtoHAsync_v2_ptsz"},
	{.name = "cuMemcpyDtoH_v2"},
	{.name = "cuMemcpyDtoH_v2_ptds"},
	{.name = "cuMemcpyHtoA"},
	{.name = "cuMemcpyHtoAAsync"},
	{.name = "cuMemcpyHtoAAsync_v2"},
	{.name = "cuMemcpyHtoAAsync_v2_ptsz"},
	{.name = "cuMemcpyHtoA_v2"},
	{.name = "cuMemcpyHtoA_v2_ptds"},
	{.name = "cuMemcpyHtoD"},
	{.name = "cuMemcpyHtoDAsync"},
	{.name = "cuMemcpyHtoDAsync_v2"},
	{.name = "cuMemcpyHtoDAsync_v2_ptsz"},
	{.name = "cuMemcpyHtoD_v2"},
	{.name = "cuMemcpyHtoD_v2_ptds"},
	{.name = "cuMemcpyPeer"},
	{.name = "cuMemcpyPeerAsync"},
	{.name = "cuMemcpyPeerAsync_ptsz"},
	{.name = "cuMemcpyPeer_ptds"},
	{.name = "cuMemcpy_ptds"},
	{.name = "cuMemsetD16"},
	{.name = "cuMemsetD16Async"},
	{.name = "cuMemsetD16Async_ptsz"},
	{.name = "cuMemsetD16_v2"},
	{.name = "cuMemsetD16_v2_ptds"},
	{.name = "cuMemsetD2D16"},
	{.name = "cuMemsetD2D16Async"},
	{.name = "cuMemsetD2D16Async_ptsz"},
	{.name = "cuMemsetD2D16_v2"},
	{.name = "cuMemsetD2D16_v2_ptds"},
	{.name = "cuMemsetD2D32"},
	{.name = "cuMemsetD2D32Async"},
	{.name = "cuMemsetD2D32Async_ptsz"},
	{.name = "cuMemsetD2D32_v2"},
	{.name = "cuMemsetD2D32_v2_ptds"},
	{.name = "cuMemsetD2D8"},
	{.name = "cuMemsetD2D8Async"},
	{.name = "cuMemsetD2D8Async_ptsz"},
	{.name = "cuMemsetD2D8_v2"},
	{.name = "cuMemsetD2D8_v2_ptds"},
	{.name = "cuMemsetD32"},
	{.name = "cuMemsetD32Async"},
	{.name = "cuMemsetD32Async_ptsz"},
	{.name = "cuMemsetD32_v2"},
	{.name = "cuMemsetD32_v2_ptds"},
	{.name = "cuMemsetD8"},
	{.name = "cuMemsetD8Async"},
	{.name = "cuMemsetD8Async_ptsz"},
	{.name = "cuMemsetD8_v2"},
	{.name = "cuMemsetD8_v2_ptds"},
	{.name = "cuMipmappedArrayCreate"},
	{.name = "cuMipmappedArrayDestroy"},
	{.name = "cuMipmappedArrayGetLevel"},
	{.name = "cuMipmappedArrayGetMemoryRequirements"},
	{.name = "cuMipmappedArrayGetSparseProperties"},
	{.name = "cuModuleEnumerateFunctions"},
	{.name = "cuModuleGetFunction"},
	{.name = "cuModuleGetFunctionCount"},
	{.name = "cuModuleGetGlobal"},
	{.name = "cuModuleGetGlobal_v2"},
	{.name = "cuModuleGetLoadingMode"},
	{.name = "cuModuleGetSurfRef"},
	{.name = "cuModuleGetTexRef"},
	{.name = "cuModuleLoad"},
	{.name = "cuModuleLoadData"},
	{.name = "cuModuleLoadDataEx"},
	{.name = "cuModuleLoadFatBinary"},
	{.name = "cuModuleUnload"},
	{.name = "cuMulticastAddDevice"},
	{.name = "cuMulticastBindAddr"},
	{.name = "cuMulticastBindMem"},
	{.name = "cuMulticastCreate"},
	{.name = "cuMulticastGetGranularity"},
	{.name = "cuMulticastUnbind"},
	{.name = "cuOccupancyAvailableDynamicSMemPerBlock"},
	{.name = "cuOccupancyMaxActiveBlocksPerMultiprocessor"},
	{.name = "cuOccupancyMaxActiveBlocksPerMultiprocessorWithFlags"},
	{.name = "cuOccupancyMaxActiveClusters"},
	{.name = "cuOccupancyMaxPotentialBlockSize"},
	{.name = "cuOccupancyMaxPotentialBlockSizeWithFlags"},
	{.name = "cuOccupancyMaxPotentialClusterSize"},
	{.name = "cuParamSetSize"},
	{.name = "cuParamSetTexRef"},
	{.name = "cuParamSetf"},
	{.name = "cuParamSeti"},
	{.name = "cuParamSetv"},
	{.name = "cuPointerGetAttribute"},
	{.name = "cuPointerGetAttributes"},
	{.name = "cuPointerSetAttribute"},
	{.name = "cuProfilerInitialize"},
	{.name = "cuProfilerStart"},
	{.name = "cuProfilerStop"},
	{.name = "cuSignalExternalSemaphoresAsync"},
	{.name = "cuSignalExternalSemaphoresAsync_ptsz"},
	{.name = "cuStreamAddCallback"},
	{.name = "cuStreamAddCallback_ptsz"},
	{.name = "cuStreamAttachMemAsync"},
	{.name = "cuStreamAttachMemAsync_ptsz"},
	{.name = "cuStreamBatchMemOp"},
	{.name = "cuStreamBatchMemOp_ptsz"},
	{.name = "cuStreamBatchMemOp_v2"},
	{.name = "cuStreamBatchMemOp_v2_ptsz"},
	{.name = "cuStreamBeginCapture"},
	{.name = "cuStreamBeginCaptureToGraph"},
	{.name = "cuStreamBeginCaptureToGraph_ptsz"},
	{.name = "cuStreamBeginCapture_ptsz"},
	{.name = "cuStreamBeginCapture_v2"},
	{.name = "cuStreamBeginCapture_v2_ptsz"},
	{.name = "cuStreamCopyAttributes"},
	{.name = "cuStreamCopyAttributes_ptsz"},
	{.name = "cuStreamCreate"},
	{.name = "cuStreamCreateWithPriority"},
	{.name = "cuStreamDestroy"},
	{.name = "cuStreamDestroy_v2"},
	{.name = "cuStreamEndCapture"},
	{.name = "cuStreamEndCapture_ptsz"},
	{.name = "cuStreamGetAttribute"},
	{.name = "cuStreamGetAttribute_ptsz"},
	{.name = "cuStreamGetCaptureInfo"},
	{.name = "cuStreamGetCaptureInfo_ptsz"},
	{.name = "cuStreamGetCaptureInfo_v2"},
	{.name = "cuStreamGetCaptureInfo_v2_ptsz"},
	{.name = "cuStreamGetCaptureInfo_v3"},
	{.name = "cuStreamGetCaptureInfo_v3_ptsz"},
	{.name = "cuStreamGetCtx"},
	{.name = "cuStreamGetCtx_ptsz"},
	{.name = "cuStreamGetCtx_v2"},
	{.name = "cuStreamGetCtx_v2_ptsz"},
	{.name = "cuStreamGetDevice"},
	{.name = "cuStreamGetDevice_ptsz"},
	{.name = "cuStreamGetFlags"},
	{.name = "cuStreamGetFlags_ptsz"},
	{.name = "cuStreamGetGreenCtx"},
	{.name = "cuStreamGetId"},
	{.name = "cuStreamGetId_ptsz"},
	{.name = "cuStreamGetPriority"},
	{.name = "cuStreamGetPriority_ptsz"},
	{.name = "cuStreamIsCapturing"},
	{.name = "cuStreamIsCapturing_ptsz"},
	{.name = "cuStreamQuery"},
	{.name = "cuStreamQuery_ptsz"},
	{.name = "cuStreamSetAttribute"},
	{.name = "cuStreamSetAttribute_ptsz"},
	{.name = "cuStreamSynchronize"},
	{.name = "cuStreamSynchronize_ptsz"},
	{.name = "cuStreamUpdateCaptureDependencies"},
	{.name = "cuStreamUpdateCaptureDependencies_ptsz"},
	{.name = "cuStreamUpdateCaptureDependencies_v2"},
	{.name = "cuStreamUpdateCaptureDependencies_v2_ptsz"},
	{.name = "cuStreamWaitEvent"},
	{.name = "cuStreamWaitEvent_ptsz"},
	{.name = "cuStreamWaitValue32"},
	{.name = "cuStreamWaitValue32_ptsz"},
	{.name = "cuStreamWaitValue32_v2"},
	{.name = "cuStreamWaitValue32_v2_ptsz"},
	{.name = "cuStreamWaitValue64"},
	{.name = "cuStreamWaitValue64_ptsz"},
	{.name = "cuStreamWaitValue64_v2"},
	{.name = "cuStreamWaitValue64_v2_ptsz"},
	{.name = "cuStreamWriteValue32"},
	{.name = "cuStreamWriteValue32_ptsz"},
	{.name = "cuStreamWriteValue32_v2"},
	{.name = "cuStreamWriteValue32_v2_ptsz"},
	{.name = "cuStreamWriteValue64"},
	{.name = "cuStreamWriteValue64_ptsz"},
	{.name = "cuStreamWriteValue64_v2"},
	{.name = "cuStreamWriteValue64_v2_ptsz"},
	{.name = "cuSurfObjectCreate"},
	{.name = "cuSurfObjectDestroy"},
	{.name = "cuSurfObjectGetResourceDesc"},
	{.name = "cuSurfRefGetArray"},
	{.name = "cuSurfRefSetArray"},
	{.name = "cuTensorMapEncodeIm2col"},
	{.name = "cuTensorMapEncodeIm2colWide"},
	{.name = "cuTensorMapEncodeTiled"},
	{.name = "cuTensorMapReplaceAddress"},
	{.name = "cuTexObjectCreate"},
	{.name = "cuTexObjectDestroy"},
	{.name = "cuTexObjectGetResourceDesc"},
	{.name = "cuTexObjectGetResourceViewDesc"},
	{.name = "cuTexObjectGetTextureDesc"},
	{.name = "cuTexRefCreate"},
	{.name = "cuTexRefDestroy"},
	{.name = "cuTexRefGetAddress"},
	{.name = "cuTexRefGetAddressMode"},
	{.name = "cuTexRefGetAddress_v2"},
	{.name = "cuTexRefGetArray"},
	{.name = "cuTexRefGetBorderColor"},
	{.name = "cuTexRefGetFilterMode"},
	{.name = "cuTexRefGetFlags"},
	{.name = "cuTexRefGetFormat"},
	{.name = "cuTexRefGetMaxAnisotropy"},
	{.name = "cuTexRefGetMipmapFilterMode"},
	{.name = "cuTexRefGetMipmapLevelBias"},
	{.name = "cuTexRefGetMipmapLevelClamp"},
	{.name = "cuTexRefGetMipmappedArray"},
	{.name = "cuTexRefSetAddress"},
	{.name = "cuTexRefSetAddress2D"},
	{.name = "cuTexRefSetAddress2D_v2"},
	{.name = "cuTexRefSetAddress2D_v3"},
	{.name = "cuTexRefSetAddressMode"},
	{.name = "cuTexRefSetAddress_v2"},
	{.name = "cuTexRefSetArray"},
	{.name = "cuTexRefSetBorderColor"},
	{.name = "cuTexRefSetFilterMode"},
	{.name = "cuTexRefSetFlags"},
	{.name = "cuTexRefSetFormat"},
	{.name = "cuTexRefSetMaxAnisotropy"},
	{.name = "cuTexRefSetMipmapFilterMode"},
	{.name = "cuTexRefSetMipmapLevelBias"},
	{.name = "cuTexRefSetMipmapLevelClamp"},
	{.name = "cuTexRefSetMipmappedArray"},
	{.name = "cuThreadExchangeStreamCaptureMode"},
	{.name = "cuUserObjectCreate"},
	{.name = "cuUserObjectRelease"},
	{.name = "cuUserObjectRetain"},
	{.name = "cuVDPAUCtxCreate"},
	{.name = "cuVDPAUCtxCreate_v2"},
	{.name = "cuVDPAUGetDevice"},
	{.name = "cuWaitExternalSemaphoresAsync"},
	{.name = "cuWaitExternalSemaphoresAsync_ptsz"},
	{.name = "cudbgApiAttach"},
	{.name = "cudbgApiClientPid"},
	{.name = "cudbgApiClientRevision"},
	{.name = "cudbgApiDetach"},
	{.name = "cudbgApiInit"},
	{.name = "cudbgAttachHandlerAvailable"},
	{.name = "cudbgDebuggerCapabilities"},
	{.name = "cudbgDebuggerInitialized"},
	{.name = "cudbgDetachSuspendedDevicesMask"},
	{.name = "cudbgEnableIntegratedMemcheck"},
	{.name = "cudbgEnableLaunchBlocking"},
	{.name = "cudbgEnablePreemptionDebugging"},
	{.name = "cudbgGetAPI"},
	{.name = "cudbgGetAPIVersion"},
	{.name = "cudbgInjectionPath"},
	{.name = "cudbgIpcFlag"},
	{.name = "cudbgMain"},
	{.name = "cudbgReportDriverApiError"},
	{.name = "cudbgReportDriverApiErrorFlags"},
	{.name = "cudbgReportDriverInternalError"},
	{.name = "cudbgReportedDriverApiErrorCode"},
	{.name = "cudbgReportedDriverApiErrorFuncNameAddr"},
	{.name = "cudbgReportedDriverApiErrorFuncNameSize"},
	{.name = "cudbgReportedDriverApiErrorNameAddr"},
	{.name = "cudbgReportedDriverApiErrorNameSize"},
	{.name = "cudbgReportedDriverApiErrorSource"},
	{.name = "cudbgReportedDriverApiErrorStringAddr"},
	{.name = "cudbgReportedDriverApiErrorStringSize"},
	{.name = "cudbgReportedDriverInternalErrorCode"},
	{.name = "cudbgResumeForAttachDetach"},
	{.name = "cudbgRpcEnabled"},
	{.name = "cudbgSessionId"},
	{.name = "cudbgUseExternalDebugger"},
};

__attribute__((constructor))
static void load_cuda_libraries(void) {
	void *table = NULL;
	int i = 0;
	char cuda_filename[FILENAME_MAX];

	snprintf(cuda_filename, FILENAME_MAX - 1, "%s.%s", CUDA_LIBRARY_PREFIX, DRIVER_VERSION);
	cuda_filename[FILENAME_MAX - 1] = '\0';
	cuda_filename[FILENAME_MAX - 1] = '\0';

	table = dlopen(cuda_filename, RTLD_NOW | RTLD_NODELETE);
	if (!table) {
		perror("dlopen failed");
		exit(1);
	}

	for (i = 0; i < CUDA_ENTRY_END; i++) {
		cuda_library_entry[i].fn_ptr = dlsym(table, cuda_library_entry[i].name);
		if (!cuda_library_entry[i].fn_ptr) {
			fprintf(stderr, "dlsym failed: %s\n", dlerror());
			exit(1);
		}
	}

	dlclose(table);
}
